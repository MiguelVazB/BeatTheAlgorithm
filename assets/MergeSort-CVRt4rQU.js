import{R as e,j as g}from"./index-ItJXxZpU.js";import{g as U,A as W}from"./ArrowsComponent-CWKr5Hzn.js";const G=({difficulty:v,randomNumbers:k,countDownOver:C,setWinner:q,winner:f})=>{const[T,R]=e.useState([]),[I,w]=e.useState([]),[p,L]=e.useState([]),[u,s]=e.useState(!1),[d,t]=e.useState(!1),n=e.useRef(f),i=e.useRef(null),[$,F]=e.useState(!1),[E,P]=e.useState(0),[M,_]=e.useState(1),V=e.useRef(E);e.useEffect(()=>{C?(s(!0),F(!0),t(!0)):(s(!1),F(!1))},[C]),e.useEffect(()=>{d&&(V.current=E,p.length===4&&(O(E),O(M)))},[E,M]);function O(a){let l,r=Number(i?.current?.children[a]?.innerHTML),o;switch(p.forEach((S,h)=>{l||S.forEach(c=>{o=Number(i?.current?.children[c]?.innerHTML),o===r&&(l=h)})}),l){case 0:i?.current?.children[a].classList.add("squaresColor1");break;case 1:i?.current?.children[a].classList.add("squaresColor2");break;case 2:i?.current?.children[a].classList.add("squaresColor3");break;case 3:i?.current?.children[a].classList.add("squaresColor4");break}}e.useEffect(()=>{p.length>0&&p.forEach((a,l)=>{a.forEach(r=>{switch(l){case 0:i?.current?.children[r].classList.add("squaresColor1");break;case 1:i?.current?.children[r].classList.add("squaresColor2");break;case 2:i?.current?.children[r].classList.add("squaresColor3");break;case 3:i?.current?.children[r].classList.add("squaresColor4");break}})})},[p]),e.useEffect(()=>{if($){const a=setInterval(()=>{(V.current>=32||f==="user")&&(clearInterval(a),s(!1)),V.current>20&&s(!1),P(l=>l+2),_(l=>l+2)},U("merge_sort",v)/1.3)}},[$]),e.useEffect(()=>{R([...k]),w([...k])},[k]),e.useEffect(()=>{if(d&&T.length>0){const a=r=>{let o=Array.from(r),S=o.length,h=new Array(S),c=1,m=0;const A=setInterval(()=>{if(n.current==="user"){s(!1),t(!1),clearInterval(A);return}if(c>=S){s(!1),setTimeout(()=>{n.current!=="user"&&q("computer"),t(!1),clearInterval(A)},U("merge_sort",v)*2);return}if(m>=S){let b=o;o=h,h=b,c*=2,m=0;return}let x=m,y=Math.min(x+c,S),J=y,N=Math.min(y+c,S);l(x,y,J,N,o,h),w(b=>[...b,...h.slice(x,N)]),H(x,N),m+=2*c},U("merge_sort",v));return n.current=f,o},l=(r,o,S,h,c,m)=>{let A=r;for(;r<S&&o<h;)c[r]<=c[o]?m[A++]=c[r++]:m[A++]=c[o++];for(;r<S;)m[A++]=c[r++];for(;o<h;)m[A++]=c[o++];for(let j=r;j<o;j++)c[j]=m[j]};a(T)}},[d,f]);function H(a,l){L(r=>r.length<4?[...r,[a+8,l+7]]:r)}return g.jsxs("div",{className:"mergeSort",children:[g.jsx("div",{ref:i,className:"valuesToSortContainer",children:I.map((a,l)=>g.jsx("div",{className:`valueToSort valueToSort${l}`,children:a},`${a} ${l}`))}),u&&g.jsx(W,{firstArrowPos:E,secondArrowPos:M,valuesRef:i,xOffset:20,yOffset:1})]})},K=({randomNumbers:v,setWinner:k})=>{const[C,q]=e.useState([]),[f,T]=e.useState([]),[R,I]=e.useState([]),w=e.useRef(null);e.useEffect(()=>{q(v),T([" "," "," "," "," "," "," "," "]);let u=[...v];I(u.sort((s,d)=>s-d))},[v]),e.useEffect(()=>{f.length>0&&JSON.stringify(f)===JSON.stringify(R)&&k("user")},[f]);function p(u,s){let d;for(let t=0;t<f.length;t++)if(String(f[t])===" "){d=t;break}T(t=>{let n=[...t];return n[d]=u,[...n]}),q(t=>{let n=[...t];return n[s]=" ",[...n]}),w?.current?.children[s]?.classList.add("valueClicked")}function L(u,s){let d;for(let t=0;t<C.length;t++)if(String(C[t])===" "){d=t;break}q(t=>{let n=[...t];return n[d]=u,[...n]}),T(t=>{let n=[...t];return n[s]=" ",[...n]})}return g.jsxs("div",{className:"mergeSortUser",children:[g.jsx("div",{className:"userAttemptContainer",children:f.map((u,s)=>g.jsx("div",{className:"userAttempt",onClick:()=>L(u,s),children:u},`attempt${s}`))}),g.jsx("div",{ref:w,className:"valuesToSortUserContainer",children:C.map((u,s)=>g.jsx("div",{className:"valueToSortMerge",onClick:()=>p(u,s),children:u},`user${u} ${s}`))})]})};export{G as MergeSort,K as MergeSortUser};
