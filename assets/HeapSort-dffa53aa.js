import{R as n,j as r}from"./index-36a6a362.js";import{A as se}from"./ArrowsComponent-484b0311.js";const ie=({difficulty:g,randomNumbers:A,countDownOver:S,setWinner:I,winner:w})=>{const[N,X]=n.useState([]),[j,V]=n.useState([]),[$,Y]=n.useState([]),[u,d]=n.useState(null),[a,E]=n.useState(0),[Z,B]=n.useState(!1),[q,H]=n.useState(!1),D=n.useRef(w),s=n.useRef(null),[_,G]=n.useState(13),[b,J]=n.useState(14),[L,W]=n.useState([]),[R,K]=n.useState([]),[F,z]=n.useState([]);n.useEffect(()=>{X([...A]),V([...A])},[A]),n.useEffect(()=>{d(s.current.getBoundingClientRect())},[j]),n.useEffect(()=>{const t=()=>{if(s.current){const e=s.current.getBoundingClientRect();d(e)}};if(s.current){const e=s.current.getBoundingClientRect();d(e)}return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),n.useEffect(()=>{(()=>{if(!u)return;let e=[];for(let h=0;h<j.length;h++){let x=u.left+window.scrollX,m=u.top+window.scrollY,C=u.width,te=u.height;const O={width:C,height:te,position:"absolute",top:0,left:0};if(h===0){let y=s.current.children[0].getBoundingClientRect(),U=y.left+y.width/2-x,Q=y.top+y.height/2-m,v=s.current.children[1].getBoundingClientRect(),k=v.left+v.width/2-x,P=v.top+v.height/2-m;e.push(r.jsx("div",{className:"lineContainer",style:{position:"absolute",width:"100%",height:"auto"},children:r.jsx("svg",{style:O,children:r.jsx("line",{className:"treeEdge",x1:U,y1:Q+y.height/4,x2:k,y2:P+v.height/4})})},`${h}${U}-${k}-${P}`)),v=s.current.children[2].getBoundingClientRect(),k=v.left+v.width/2-x,P=v.top+v.height/2-m,e.push(r.jsx("div",{className:"lineContainer",style:{position:"absolute",width:"100%",height:"auto"},children:r.jsx("svg",{style:O,children:r.jsx("line",{className:"treeEdge",x1:U,y1:Q+y.height/4,x2:k,y2:P+v.height/4})})},`${h}${U}-${k}-${P}`))}else{if(2*h+1<j.length){var l=s.current.children[h].getBoundingClientRect(),c=l.left+l.width/2-x,o=l.top+l.height/2-m,i=s.current.children[2*h+1].getBoundingClientRect(),p=i.left+i.width/2-x,f=i.top+i.height/2-m;e.push(r.jsx("div",{className:"lineContainer",style:{position:"absolute",width:"100%",height:"auto"},children:r.jsx("svg",{style:O,children:r.jsx("line",{className:"treeEdge",x1:c,y1:o+l.height/4,x2:p,y2:f+i.height/4})})},`${h}${c}-${p}-${f}`))}2*h+2<j.length&&(i=s.current.children[2*h+2].getBoundingClientRect(),p=i.left+i.width/2-x,f=i.top+i.height/2-m,e.push(r.jsx("div",{className:"lineContainer",style:{position:"absolute",width:"100%",height:"auto"},children:r.jsx("svg",{style:O,children:r.jsx("line",{className:"treeEdge",x1:c,y1:o+l.height/4,x2:p,y2:f+i.height/4})})},`${h}${c}-${p}-${f}`)))}}Y([...e])})()},[j,s,u]),n.useEffect(()=>{if(g)switch(g){case"Easy":E(3e3);break;case"Intermediate":E(2e3);break;case"Hard":E(1e3);break;case"Impossible":E(100);break}},[g]),n.useEffect(()=>{S?(H(!0),setInterval(()=>{B(!0)},a)):B(!1)},[S]),n.useEffect(()=>{var t,e,l,c,o,i;if(R.length>0){let p=R[0],f=R[1],h=(t=s==null?void 0:s.current)==null?void 0:t.children[p].getBoundingClientRect(),x=(e=s==null?void 0:s.current)==null?void 0:e.children[f].getBoundingClientRect();if(f%2===0){let m=x.x-h.x,C=x.y-h.y;(l=s==null?void 0:s.current)==null||l.children[p].animate([{transform:"translate(0px)",opacity:.5},{transform:`translate(${m}px, ${C}px)`,opacity:1}],{duration:g==="Easy"?a/10:a/20,timingFunction:"ease-in-out"}),(c=s==null?void 0:s.current)==null||c.children[f].animate([{transform:"translate(0px)",opacity:.5},{transform:`translate(${-m}px, ${-C}px)`,opacity:1}],{duration:g==="Easy"?a/10:a/20,timingFunction:"ease-in-out"})}if(f%2!==0){let m=x.x-h.x,C=x.y-h.y;(o=s==null?void 0:s.current)==null||o.children[f].animate([{transform:"translate(0px)",opacity:.5},{transform:`translate(${-m}px, ${-C}px)`,opacity:1}],{duration:g==="Easy"?a/10:a/20,timingFunction:"ease-in-out"}),(i=s==null?void 0:s.current)==null||i.children[p].animate([{transform:"translate(0px)",opacity:.5},{transform:`translate(${m}px, ${C}px)`,opacity:1}],{duration:g==="Easy"?a/10:a/20,timingFunction:"ease-in-out"})}}},[R]),n.useEffect(()=>{L[0]&&J(L[0]),L[1]&&setTimeout(()=>{J(L[1])},a/10)},[L]),n.useEffect(()=>{var e,l;let t;if(F.length>0){let c=F[0],o=F[1];t=(e=s==null?void 0:s.current)==null?void 0:e.children[c];let i=(l=s==null?void 0:s.current)==null?void 0:l.children[o];t.style.backgroundColor="black",i.style.backgroundColor="black"}},[F]);function T(t,e){let l=t[0];return t[0]=t[e-1],M(t,e-1,0),K([0,e-1]),z([0,e-1]),l}function M(t,e,l){let c=l;const o=2*l+1,i=2*l+2;G(l),o<e&&t[o]>t[c]&&(c=o),i<e&&t[i]>t[c]&&(c=i),o<e&&i<e?W([o,i]):o<e?W([o]):i<e&&W([i]),c!==l&&(ee(t,l,c),K([l,c]),setTimeout(()=>{G(l)},a/10),setTimeout(()=>{J(c)},a/10),M(t,e,c))}function ee(t,e,l){[t[e],t[l]]=[t[l],t[e]],V([...t])}return n.useEffect(()=>{if(q){let t=[...N],e=t.length,l=Math.floor(e/2-1),c=0,o=setInterval(()=>{const i=D.current;if(i==="user"&&(H(!1),clearInterval(o),B(!1)),l>=0)M(t,e,l),l--;else if(c<e){let p=e-c,f=T(t,p);t[p-1]=f,V([...t]),c++}else i==="user"?(H(!1),clearInterval(o),B(!1)):(I("computer"),H(!1),clearInterval(o),B(!1))},a);D.current=w}},[q,w]),r.jsxs("div",{className:"heapSort",children:[r.jsxs("div",{className:"originalValues",children:[r.jsx("div",{className:"orValues",children:"Original Values:"}),N.map((t,e)=>r.jsx("div",{children:t},`${t} ${e}`))]}),r.jsx("div",{ref:s,className:"binaryTree",children:j.map((t,e)=>r.jsx("div",{className:`circleValue circleValue${e}`,children:t},`${t} ${e}`))}),$,Z&&r.jsx(se,{firstArrowPos:_,secondArrowPos:b,valuesRef:s,xOffset:100,yOffset:1})]})},re=({randomNumbers:g,setWinner:A})=>{const[S,I]=n.useState([]),[w,N]=n.useState(""),[X,j]=n.useState([]),V=n.useRef(null),$=n.useRef(null);n.useEffect(()=>{I(g);let u=[...g];j(u.sort((d,a)=>d-a))},[g]),n.useEffect(()=>{S.length>0&&S.length===g.length&&JSON.stringify(S)==JSON.stringify(X)&&A("user")},[S]),n.useEffect(()=>{var u,d;w?(u=$==null?void 0:$.current)==null||u.classList.remove("nonHighlightSelectedValue"):(d=$==null?void 0:$.current)==null||d.classList.add("nonHighlightSelectedValue")},[w]);function Y(u,d){let a=[...S];if(w==="")a[u]="",I([...a]),N(d);else{let E=w;N(d),a[u]=E,I([...a])}}return r.jsxs("div",{className:"heapSortUser",children:[r.jsx("div",{className:"selectedValueContainer",children:r.jsx("div",{ref:$,className:"selectedValue nonHighlightSelectedValue",children:w})}),r.jsx("div",{ref:V,className:"valuesToSortUser",children:S.map((u,d)=>r.jsxs("div",{className:"userValues",onClick:()=>Y(d,u),children:[r.jsx("span",{className:"indexPos",children:d+1}),u]},`${u}+${d}`))})]})};export{ie as HeapSort,re as HeapSortUser};
