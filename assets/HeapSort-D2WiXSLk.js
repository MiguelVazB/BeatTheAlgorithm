import{R as n,j as i}from"./index-ItJXxZpU.js";import{g as u,A as te}from"./ArrowsComponent-CWKr5Hzn.js";const re=({difficulty:a,randomNumbers:C,countDownOver:p,setWinner:V,winner:x})=>{const[A,b]=n.useState([]),[m,E]=n.useState([]),[N,O]=n.useState([]),[h,d]=n.useState(null),[v,w]=n.useState(!1),[k,L]=n.useState(!1),D=n.useRef(x),o=n.useRef(null),[q,J]=n.useState(-1),[G,U]=n.useState(-1),[I,X]=n.useState([]),[T,W]=n.useState([]),[P,K]=n.useState([]);n.useEffect(()=>{b([...C]),E([...C])},[C]),n.useEffect(()=>{d(o.current.getBoundingClientRect())},[m]),n.useEffect(()=>{const t=()=>{if(o.current){const e=o.current.getBoundingClientRect();d(e)}};if(o.current){const e=o.current.getBoundingClientRect();d(e)}return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),n.useEffect(()=>{(()=>{if(!h)return;let e=[];for(let g=0;g<m.length;g++){let R=h.left+window.scrollX,j=h.top+window.scrollY,z=h.width,ee=h.height;const F={width:z,height:ee,position:"absolute",top:0,left:0};if(g===0){let y=o.current.children[0].getBoundingClientRect(),H=y.left+y.width/2-R,M=y.top+y.height/2-j,f=o.current.children[1].getBoundingClientRect(),B=f.left+f.width/2-R,_=f.top+f.height/2-j;e.push(i.jsx("div",{className:"lineContainer",style:{position:"absolute",width:"100%",height:"auto"},children:i.jsx("svg",{style:F,children:i.jsx("line",{className:"treeEdge",x1:H,y1:M+y.height/4,x2:B,y2:_+f.height/4})})},`${g}${H}-${B}-${_}`)),f=o.current.children[2].getBoundingClientRect(),B=f.left+f.width/2-R,_=f.top+f.height/2-j,e.push(i.jsx("div",{className:"lineContainer",style:{position:"absolute",width:"100%",height:"auto"},children:i.jsx("svg",{style:F,children:i.jsx("line",{className:"treeEdge",x1:H,y1:M+y.height/4,x2:B,y2:_+f.height/4})})},`${g}${H}-${B}-${_}`))}else{if(2*g+1<m.length){var s=o.current.children[g].getBoundingClientRect(),l=s.left+s.width/2-R,c=s.top+s.height/2-j,r=o.current.children[2*g+1].getBoundingClientRect(),S=r.left+r.width/2-R,$=r.top+r.height/2-j;e.push(i.jsx("div",{className:"lineContainer",style:{position:"absolute",width:"100%",height:"auto"},children:i.jsx("svg",{style:F,children:i.jsx("line",{className:"treeEdge",x1:l,y1:c+s.height/4,x2:S,y2:$+r.height/4})})},`${g}${l}-${S}-${$}`))}2*g+2<m.length&&(r=o.current.children[2*g+2].getBoundingClientRect(),S=r.left+r.width/2-R,$=r.top+r.height/2-j,e.push(i.jsx("div",{className:"lineContainer",style:{position:"absolute",width:"100%",height:"auto"},children:i.jsx("svg",{style:F,children:i.jsx("line",{className:"treeEdge",x1:l,y1:c+s.height/4,x2:S,y2:$+r.height/4})})},`${g}${l}-${S}-${$}`)))}}O([...e])})()},[m,o,h]),n.useEffect(()=>{p?(L(!0),setInterval(()=>{w(!0)},u("heap_sort",a))):w(!1)},[p]),n.useEffect(()=>{if(T.length>0){let t=T[0],e=T[1],s=o?.current?.children[t].getBoundingClientRect(),l=o?.current?.children[e].getBoundingClientRect();if(e%2===0){let c=l.x-s.x,r=l.y-s.y;o?.current?.children[t].animate([{transform:"translate(0px)",opacity:.5},{transform:`translate(${c}px, ${r}px)`,opacity:1}],{duration:a==="easy"?u("heap_sort",a)/10:u("heap_sort",a)/20,timingFunction:"ease-in-out"}),o?.current?.children[e].animate([{transform:"translate(0px)",opacity:.5},{transform:`translate(${-c}px, ${-r}px)`,opacity:1}],{duration:a==="easy"?u("heap_sort",a)/10:u("heap_sort",a)/20,timingFunction:"ease-in-out"})}if(e%2!==0){let c=l.x-s.x,r=l.y-s.y;o?.current?.children[e].animate([{transform:"translate(0px)",opacity:.5},{transform:`translate(${-c}px, ${-r}px)`,opacity:1}],{duration:a==="easy"?u("heap_sort",a)/10:u("heap_sort",a)/20,timingFunction:"ease-in-out"}),o?.current?.children[t].animate([{transform:"translate(0px)",opacity:.5},{transform:`translate(${c}px, ${r}px)`,opacity:1}],{duration:a==="easy"?u("heap_sort",a)/10:u("heap_sort",a)/20,timingFunction:"ease-in-out"})}}},[T]),n.useEffect(()=>{I[0]&&U(I[0]),I[1]&&setTimeout(()=>{U(I[1])},u("heap_sort",a)/10)},[I]),n.useEffect(()=>{let t;if(P.length>0){let e=P[0],s=P[1];t=o?.current?.children[e];let l=o?.current?.children[s];t.style.backgroundColor="#164B9D",l.style.backgroundColor="#164B9D"}},[P]);function Q(t,e){let s=t[0];return t[0]=t[e-1],Y(t,e-1,0),W([0,e-1]),K([0,e-1]),s}function Y(t,e,s){let l=s;const c=2*s+1,r=2*s+2;J(s),c<e&&t[c]>t[l]&&(l=c),r<e&&t[r]>t[l]&&(l=r),c<e&&r<e?X([c,r]):c<e?X([c]):r<e&&X([r]),l!==s&&(Z(t,s,l),W([s,l]),setTimeout(()=>{J(s)},u("heap_sort",a)/10),setTimeout(()=>{U(l)},u("heap_sort",a)/10),Y(t,e,l))}function Z(t,e,s){[t[e],t[s]]=[t[s],t[e]],E([...t])}return n.useEffect(()=>{if(k){let t=[...A],e=t.length,s=Math.floor(e/2-1),l=0,c=setInterval(()=>{const r=D.current;if(r==="user"&&(L(!1),clearInterval(c),w(!1)),s>=0)Y(t,e,s),s--;else if(l<e){let S=e-l,$=Q(t,S);t[S-1]=$,E([...t]),l++}else r==="user"?(L(!1),clearInterval(c),w(!1)):(V("computer"),L(!1),clearInterval(c),w(!1))},u("heap_sort",a));D.current=x}},[k,x]),i.jsxs("div",{className:"heapSort",children:[i.jsxs("div",{className:"originalValues",children:[i.jsx("div",{className:"orValues",children:"Original Values:"}),A.map((t,e)=>i.jsx("div",{children:t},`${t} ${e}`))]}),i.jsx("div",{ref:o,className:"binaryTree",children:m.map((t,e)=>i.jsx("div",{className:`circleValue circleValue${e}`,children:t},`${t} ${e}`))}),N,v&&i.jsx(te,{firstArrowPos:q,secondArrowPos:G,valuesRef:o,xOffset:1,yOffset:1})]})},le=({randomNumbers:a,setWinner:C})=>{const[p,V]=n.useState([]),[x,A]=n.useState(""),[b,m]=n.useState([]),E=n.useRef(null),N=n.useRef(null);n.useEffect(()=>{V(a);let h=[...a];m(h.sort((d,v)=>d-v))},[a]),n.useEffect(()=>{p.length>0&&p.length===a.length&&JSON.stringify(p)==JSON.stringify(b)&&C("user")},[p]),n.useEffect(()=>{x?N?.current?.classList.remove("nonHighlightSelectedValue"):N?.current?.classList.add("nonHighlightSelectedValue")},[x]);function O(h,d){let v=[...p];if(x==="")v[h]="",V([...v]),A(d);else{let w=x;A(d),v[h]=w,V([...v])}}return i.jsxs("div",{className:"heapSortUser",children:[i.jsx("div",{className:"selectedValueContainer",children:i.jsx("div",{ref:N,className:"selectedValue nonHighlightSelectedValue",children:x})}),i.jsx("div",{ref:E,className:"valuesToSortUser",children:p.map((h,d)=>i.jsxs("div",{className:"userValues",onClick:()=>O(d,h),children:[i.jsx("span",{className:"indexPos",children:d+1}),h]},`${h}+${d}`))})]})};export{re as HeapSort,le as HeapSortUser};
