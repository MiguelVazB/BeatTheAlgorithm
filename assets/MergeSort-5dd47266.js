import{R as t,j as A}from"./index-2eef731e.js";import{g as P,A as D}from"./ArrowsComponent-889cc353.js";const Q=({difficulty:T,randomNumbers:I,countDownOver:w,setWinner:L,winner:S})=>{const[E,b]=t.useState([]),[g,k]=t.useState([]),[q,$]=t.useState([]),[i,r]=t.useState(!1),[v,o]=t.useState(!1),h=t.useRef(S),e=t.useRef(null),[C,_]=t.useState(!1),[M,W]=t.useState(0),[U,z]=t.useState(1),F=t.useRef(M);t.useEffect(()=>{w?(r(!0),_(!0),o(!0)):(r(!1),_(!1))},[w]),t.useEffect(()=>{v&&(F.current=M,q.length===4&&(H(M),H(U)))},[M,U]);function H(c){var u,d,n,f,p,m;let l,s=Number((d=(u=e==null?void 0:e.current)==null?void 0:u.children[c])==null?void 0:d.innerHTML),a;switch(q.forEach((J,j)=>{l||J.forEach(y=>{var N,x;a=Number((x=(N=e==null?void 0:e.current)==null?void 0:N.children[y])==null?void 0:x.innerHTML),a===s&&(l=j)})}),l){case 0:(n=e==null?void 0:e.current)==null||n.children[c].classList.add("squaresColor1");break;case 1:(f=e==null?void 0:e.current)==null||f.children[c].classList.add("squaresColor2");break;case 2:(p=e==null?void 0:e.current)==null||p.children[c].classList.add("squaresColor3");break;case 3:(m=e==null?void 0:e.current)==null||m.children[c].classList.add("squaresColor4");break}}t.useEffect(()=>{q.length>0&&q.forEach((c,l)=>{c.forEach(s=>{var a,u,d,n;switch(l){case 0:(a=e==null?void 0:e.current)==null||a.children[s].classList.add("squaresColor1");break;case 1:(u=e==null?void 0:e.current)==null||u.children[s].classList.add("squaresColor2");break;case 2:(d=e==null?void 0:e.current)==null||d.children[s].classList.add("squaresColor3");break;case 3:(n=e==null?void 0:e.current)==null||n.children[s].classList.add("squaresColor4");break}})})},[q]),t.useEffect(()=>{if(C){const c=setInterval(()=>{(F.current>=32||S==="user")&&(clearInterval(c),r(!1)),F.current>20&&r(!1),W(l=>l+2),z(l=>l+2)},P("merge_sort",T)/1.3)}},[C]),t.useEffect(()=>{b([...I]),k([...I])},[I]),t.useEffect(()=>{if(v&&E.length>0){const c=s=>{let a=Array.from(s),u=a.length,d=new Array(u),n=1,f=0;const p=setInterval(()=>{if(h.current==="user"){r(!1),o(!1),clearInterval(p);return}if(n>=u){r(!1),setTimeout(()=>{h.current!=="user"&&L("computer"),o(!1),clearInterval(p)},P("merge_sort",T)*2);return}if(f>=u){let O=a;a=d,d=O,n*=2,f=0;return}let j=f,y=Math.min(j+n,u),N=y,x=Math.min(y+n,u);l(j,y,N,x,a,d),k(O=>[...O,...d.slice(j,x)]),B(j,x),f+=2*n},P("merge_sort",T));return h.current=S,a},l=(s,a,u,d,n,f)=>{let p=s;for(;s<u&&a<d;)n[s]<=n[a]?f[p++]=n[s++]:f[p++]=n[a++];for(;s<u;)f[p++]=n[s++];for(;a<d;)f[p++]=n[a++];for(let m=s;m<a;m++)n[m]=f[m]};c(E)}},[v,S]);function B(c,l){$(s=>s.length<4?[...s,[c+8,l+7]]:s)}return A.jsxs("div",{className:"mergeSort",children:[A.jsx("div",{ref:e,className:"valuesToSortContainer",children:g.map((c,l)=>A.jsx("div",{className:`valueToSort valueToSort${l}`,children:c},`${c} ${l}`))}),i&&A.jsx(D,{firstArrowPos:M,secondArrowPos:U,valuesRef:e,xOffset:20,yOffset:1})]})},X=({randomNumbers:T,setWinner:I})=>{const[w,L]=t.useState([]),[S,E]=t.useState([]),[b,g]=t.useState([]),k=t.useRef(null);t.useEffect(()=>{L(T),E([" "," "," "," "," "," "," "," "]);let i=[...T];g(i.sort((r,v)=>r-v))},[T]),t.useEffect(()=>{S.length>0&&JSON.stringify(S)===JSON.stringify(b)&&I("user")},[S]);function q(i,r){var o,h;let v;for(let e=0;e<S.length;e++)if(String(S[e])===" "){v=e;break}E(e=>{let C=[...e];return C[v]=i,[...C]}),L(e=>{let C=[...e];return C[r]=" ",[...C]}),(h=(o=k==null?void 0:k.current)==null?void 0:o.children[r])==null||h.classList.add("valueClicked")}function $(i,r){let v;for(let o=0;o<w.length;o++)if(String(w[o])===" "){v=o;break}L(o=>{let h=[...o];return h[v]=i,[...h]}),E(o=>{let h=[...o];return h[r]=" ",[...h]})}return A.jsxs("div",{className:"mergeSortUser",children:[A.jsx("div",{className:"userAttemptContainer",children:S.map((i,r)=>A.jsx("div",{className:"userAttempt",onClick:()=>$(i,r),children:i},`attempt${r}`))}),A.jsx("div",{ref:k,className:"valuesToSortUserContainer",children:w.map((i,r)=>A.jsx("div",{className:"valueToSortMerge",onClick:()=>q(i,r),children:i},`user${i} ${r}`))})]})};export{Q as MergeSort,X as MergeSortUser};
