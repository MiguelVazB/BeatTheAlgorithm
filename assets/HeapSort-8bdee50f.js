import{R as r,j as i}from"./index-2eef731e.js";import{g as f,A as te}from"./ArrowsComponent-889cc353.js";const re=({difficulty:o,randomNumbers:V,countDownOver:S,setWinner:I,winner:$})=>{const[B,X]=r.useState([]),[j,_]=r.useState([]),[w,Y]=r.useState([]),[h,d]=r.useState(null),[C,A]=r.useState(!1),[W,R]=r.useState(!1),M=r.useRef($),s=r.useRef(null),[Q,q]=r.useState(-1),[Z,k]=r.useState(-1),[L,D]=r.useState([]),[F,G]=r.useState([]),[H,z]=r.useState([]);r.useEffect(()=>{X([...V]),_([...V])},[V]),r.useEffect(()=>{d(s.current.getBoundingClientRect())},[j]),r.useEffect(()=>{const t=()=>{if(s.current){const e=s.current.getBoundingClientRect();d(e)}};if(s.current){const e=s.current.getBoundingClientRect();d(e)}return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),r.useEffect(()=>{(()=>{if(!h)return;let e=[];for(let u=0;u<j.length;u++){let m=h.left+window.scrollX,x=h.top+window.scrollY,E=h.width,ee=h.height;const O={width:E,height:ee,position:"absolute",top:0,left:0};if(u===0){let N=s.current.children[0].getBoundingClientRect(),U=N.left+N.width/2-m,K=N.top+N.height/2-x,v=s.current.children[1].getBoundingClientRect(),y=v.left+v.width/2-m,P=v.top+v.height/2-x;e.push(i.jsx("div",{className:"lineContainer",style:{position:"absolute",width:"100%",height:"auto"},children:i.jsx("svg",{style:O,children:i.jsx("line",{className:"treeEdge",x1:U,y1:K+N.height/4,x2:y,y2:P+v.height/4})})},`${u}${U}-${y}-${P}`)),v=s.current.children[2].getBoundingClientRect(),y=v.left+v.width/2-m,P=v.top+v.height/2-x,e.push(i.jsx("div",{className:"lineContainer",style:{position:"absolute",width:"100%",height:"auto"},children:i.jsx("svg",{style:O,children:i.jsx("line",{className:"treeEdge",x1:U,y1:K+N.height/4,x2:y,y2:P+v.height/4})})},`${u}${U}-${y}-${P}`))}else{if(2*u+1<j.length){var n=s.current.children[u].getBoundingClientRect(),a=n.left+n.width/2-m,c=n.top+n.height/2-x,l=s.current.children[2*u+1].getBoundingClientRect(),p=l.left+l.width/2-m,g=l.top+l.height/2-x;e.push(i.jsx("div",{className:"lineContainer",style:{position:"absolute",width:"100%",height:"auto"},children:i.jsx("svg",{style:O,children:i.jsx("line",{className:"treeEdge",x1:a,y1:c+n.height/4,x2:p,y2:g+l.height/4})})},`${u}${a}-${p}-${g}`))}2*u+2<j.length&&(l=s.current.children[2*u+2].getBoundingClientRect(),p=l.left+l.width/2-m,g=l.top+l.height/2-x,e.push(i.jsx("div",{className:"lineContainer",style:{position:"absolute",width:"100%",height:"auto"},children:i.jsx("svg",{style:O,children:i.jsx("line",{className:"treeEdge",x1:a,y1:c+n.height/4,x2:p,y2:g+l.height/4})})},`${u}${a}-${p}-${g}`)))}}Y([...e])})()},[j,s,h]),r.useEffect(()=>{S?(R(!0),setInterval(()=>{A(!0)},f("heap_sort",o))):A(!1)},[S]),r.useEffect(()=>{var t,e,n,a,c,l;if(F.length>0){let p=F[0],g=F[1],u=(t=s==null?void 0:s.current)==null?void 0:t.children[p].getBoundingClientRect(),m=(e=s==null?void 0:s.current)==null?void 0:e.children[g].getBoundingClientRect();if(g%2===0){let x=m.x-u.x,E=m.y-u.y;(n=s==null?void 0:s.current)==null||n.children[p].animate([{transform:"translate(0px)",opacity:.5},{transform:`translate(${x}px, ${E}px)`,opacity:1}],{duration:o==="easy"?f("heap_sort",o)/10:f("heap_sort",o)/20,timingFunction:"ease-in-out"}),(a=s==null?void 0:s.current)==null||a.children[g].animate([{transform:"translate(0px)",opacity:.5},{transform:`translate(${-x}px, ${-E}px)`,opacity:1}],{duration:o==="easy"?f("heap_sort",o)/10:f("heap_sort",o)/20,timingFunction:"ease-in-out"})}if(g%2!==0){let x=m.x-u.x,E=m.y-u.y;(c=s==null?void 0:s.current)==null||c.children[g].animate([{transform:"translate(0px)",opacity:.5},{transform:`translate(${-x}px, ${-E}px)`,opacity:1}],{duration:o==="easy"?f("heap_sort",o)/10:f("heap_sort",o)/20,timingFunction:"ease-in-out"}),(l=s==null?void 0:s.current)==null||l.children[p].animate([{transform:"translate(0px)",opacity:.5},{transform:`translate(${x}px, ${E}px)`,opacity:1}],{duration:o==="easy"?f("heap_sort",o)/10:f("heap_sort",o)/20,timingFunction:"ease-in-out"})}}},[F]),r.useEffect(()=>{L[0]&&k(L[0]),L[1]&&setTimeout(()=>{k(L[1])},f("heap_sort",o)/10)},[L]),r.useEffect(()=>{var e,n;let t;if(H.length>0){let a=H[0],c=H[1];t=(e=s==null?void 0:s.current)==null?void 0:e.children[a];let l=(n=s==null?void 0:s.current)==null?void 0:n.children[c];t.style.backgroundColor="#164B9D",l.style.backgroundColor="#164B9D"}},[H]);function T(t,e){let n=t[0];return t[0]=t[e-1],J(t,e-1,0),G([0,e-1]),z([0,e-1]),n}function J(t,e,n){let a=n;const c=2*n+1,l=2*n+2;q(n),c<e&&t[c]>t[a]&&(a=c),l<e&&t[l]>t[a]&&(a=l),c<e&&l<e?D([c,l]):c<e?D([c]):l<e&&D([l]),a!==n&&(b(t,n,a),G([n,a]),setTimeout(()=>{q(n)},f("heap_sort",o)/10),setTimeout(()=>{k(a)},f("heap_sort",o)/10),J(t,e,a))}function b(t,e,n){[t[e],t[n]]=[t[n],t[e]],_([...t])}return r.useEffect(()=>{if(W){let t=[...B],e=t.length,n=Math.floor(e/2-1),a=0,c=setInterval(()=>{const l=M.current;if(l==="user"&&(R(!1),clearInterval(c),A(!1)),n>=0)J(t,e,n),n--;else if(a<e){let p=e-a,g=T(t,p);t[p-1]=g,_([...t]),a++}else l==="user"?(R(!1),clearInterval(c),A(!1)):(I("computer"),R(!1),clearInterval(c),A(!1))},f("heap_sort",o));M.current=$}},[W,$]),i.jsxs("div",{className:"heapSort",children:[i.jsxs("div",{className:"originalValues",children:[i.jsx("div",{className:"orValues",children:"Original Values:"}),B.map((t,e)=>i.jsx("div",{children:t},`${t} ${e}`))]}),i.jsx("div",{ref:s,className:"binaryTree",children:j.map((t,e)=>i.jsx("div",{className:`circleValue circleValue${e}`,children:t},`${t} ${e}`))}),w,C&&i.jsx(te,{firstArrowPos:Q,secondArrowPos:Z,valuesRef:s,xOffset:1,yOffset:1})]})},le=({randomNumbers:o,setWinner:V})=>{const[S,I]=r.useState([]),[$,B]=r.useState(""),[X,j]=r.useState([]),_=r.useRef(null),w=r.useRef(null);r.useEffect(()=>{I(o);let h=[...o];j(h.sort((d,C)=>d-C))},[o]),r.useEffect(()=>{S.length>0&&S.length===o.length&&JSON.stringify(S)==JSON.stringify(X)&&V("user")},[S]),r.useEffect(()=>{var h,d;$?(h=w==null?void 0:w.current)==null||h.classList.remove("nonHighlightSelectedValue"):(d=w==null?void 0:w.current)==null||d.classList.add("nonHighlightSelectedValue")},[$]);function Y(h,d){let C=[...S];if($==="")C[h]="",I([...C]),B(d);else{let A=$;B(d),C[h]=A,I([...C])}}return i.jsxs("div",{className:"heapSortUser",children:[i.jsx("div",{className:"selectedValueContainer",children:i.jsx("div",{ref:w,className:"selectedValue nonHighlightSelectedValue",children:$})}),i.jsx("div",{ref:_,className:"valuesToSortUser",children:S.map((h,d)=>i.jsxs("div",{className:"userValues",onClick:()=>Y(d,h),children:[i.jsx("span",{className:"indexPos",children:d+1}),h]},`${h}+${d}`))})]})};export{re as HeapSort,le as HeapSortUser};
